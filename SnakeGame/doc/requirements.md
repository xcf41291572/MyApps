# 贪吃蛇游戏用户故事

---

## 1. 游戏窗口设置

**标题**：设置游戏主窗口尺寸

**作为** 一名玩家，
**我想要** 游戏窗口尺寸固定为800像素宽、800像素高，
**以便** 我有足够且一致的游戏区域进行游戏。

**验收标准**：
1. 游戏启动后主窗口尺寸为800×800像素。
2. 窗口不可调整大小（或调整大小不影响游戏区域）。
3. 窗口标题显示“Snake Game”。

**边界情况**：
- 在不同屏幕分辨率下窗口应居中显示。
- 窗口边框不影响内部游戏区域尺寸。

---

## 2. 开始交互页面

**标题**：显示游戏开始页面

**作为** 一名玩家，
**我想要** 游戏启动后首先看到一个居中的开始交互页面，
**以便** 我知道如何开始游戏并了解游戏名称。

**验收标准**：
1. 开始页面尺寸为400×400像素，带有黑色边框，居中显示在主窗口内。
2. 页面中央显示“Snake Game”标题（字体清晰可见）。
3. 页面下方有一个“Start”按钮。
4. 点击“Start”按钮后，开始页面消失。

**边界情况**：
- 标题和按钮在页面缩放或不同DPI下仍保持居中。
- 按钮有悬停和点击反馈。

---

## 3. 开始游戏流程

**标题**：点击开始后进入游戏并显示倒计时

**作为** 一名玩家，
**我想要** 点击“Start”按钮后看到游戏页面并有一个3秒倒计时，
**以便** 游戏不会立即开始，给我准备时间。

**验收标准**：
1. 开始页面消失后，游戏页面立即显示（同一窗口内）。
2. 游戏页面顶部显示“3、2、1”的倒计时数字，每秒更新一次。
3. 倒计时期间小蛇尚未出现。
4. 倒计时结束后，小蛇出现在游戏页面上方并开始向下移动。

**边界情况**：
- 倒计时期间用户按方向键不应影响游戏。
- 倒计时结束后小蛇立即开始移动，无延迟。

---

## 4. 小蛇初始状态与移动

**标题**：初始化小蛇并实现自动移动

**作为** 一名玩家，
**我想要** 小蛇初始长度为3节，每节为20×20像素的蓝色圆角方块，并自动以每秒20像素的速度移动，
**以便** 游戏有基本的移动机制。

**验收标准**：
1. 小蛇初始位置在游戏区域上方（例如Y=0附近）。
2. 小蛇初始方向为向下。
3. 小蛇每节之间无间隙，视觉上连续。
4. 小蛇以恒定速度（20像素/秒）平滑移动，不受帧率影响。
5. 小蛇移动时，身体各节跟随头部路径。

**边界情况**：
- 小蛇移动到边界前应能正常转向。
- 小蛇移动速度在低帧率下仍保持恒定（使用时间增量）。

---

## 5. 方向控制

**标题**：使用键盘方向键控制小蛇移动方向

**作为** 一名玩家，
**我想要** 通过按下键盘的上、下、左、右键改变小蛇的移动方向，
**以便** 我能引导小蛇去吃水果。

**验收标准**：
1. 按下上键时，若小蛇当前方向不是向下，则改为向上移动。
2. 按下下键时，若小蛇当前方向不是向上，则改为向下移动。
3. 按下左键时，若小蛇当前方向不是向右，则改为向左移动。
4. 按下右键时，若小蛇当前方向不是向左，则改为向右移动。
5. 如果按下的方向与当前方向相同，小蛇沿该方向额外移动20像素（即加速一次）。
6. 按键响应延迟低于100毫秒。

**边界情况**：
- 不允许180度立即掉头（例如向上时按向下无效）。
- 按键事件不会因为键位冲突而被忽略。

---

## 6. 水果生成

**标题**：定期在随机位置生成水果

**作为** 一名玩家，
**我想要** 每5秒在游戏区域内随机位置出现一个水果，
**以便** 我有目标去引导小蛇。

**验收标准**：
1. 水果为20×20像素的红色圆角方块。
2. 水果生成位置随机(方块左上角坐标为20的整数倍)，但必须在游戏区域内（坐标范围0~780）。
3. 水果不会与小蛇身体任何一节重叠。
4. 水果生成后保持静止，直到被小蛇吃掉或新水果生成。
5. 每5秒生成一个新水果，即使旧水果仍在场上（可同时存在多个水果）。

**边界情况**：
- 如果随机位置全部被占，应尝试有限次数后生成在可用位置。
- 水果生成时间间隔应准确（误差±0.1秒）。

---

## 7. 吃水果与增长

**标题**：小蛇头部碰到水果后长度增加

**作为** 一名玩家，
**我想要** 当小蛇头部与水果碰撞时，小蛇长度增加一节，水果消失，
**以便** 我的得分增加，游戏难度逐渐上升。

**验收标准**：
1. 碰撞检测基于小蛇头部与水果的边界框（矩形重叠）。
2. 碰撞发生后，水果立即从屏幕上消失。
3. 小蛇尾部增加一节（颜色、尺寸与现有节相同）。
4. 小蛇总长度增加后，移动速度保持不变（仍为20像素/秒）。
5. 游戏内没有视觉上的闪烁或延迟。

**边界情况**：
- 如果碰撞发生在两帧之间，仍应正确检测。
- 新增的一节在下一帧移动时跟随身体。

---

## 8. 游戏结束条件

**标题**：小蛇碰撞自身或边界时游戏结束

**作为** 一名玩家，
**我想要** 当小蛇头部碰到游戏区域边界或自己的身体时，游戏立即结束，
**以便** 游戏有明确的失败条件。

**验收标准**：
1. 小蛇头部触及游戏区域四边（X<0, X>=800, Y<0, Y>=800）时触发游戏结束。
2. 小蛇头部与自身任何一节（除头部外）重叠时触发游戏结束。
3. 游戏结束时，小蛇停止移动，所有输入被忽略。
4. 游戏结束交互页面立即显示。

**边界情况**：
- 碰撞检测应考虑小蛇头部的精确位置（20×20像素）。
- 如果小蛇在移动中同时碰到边界和自身，任一种情况都应触发结束。

---

## 9. 游戏结束交互页面

**标题**：显示游戏结束页面并提供重新开始选项

**作为** 一名玩家，
**我想要** 游戏结束后看到一个居中的结束页面，其中有“Restart”按钮，
**以便** 我可以重新开始游戏而不必重启应用。

**验收标准**：
1. 结束页面尺寸为400×400像素，带有黑色边框，居中显示。
2. 页面中央显示“Game Over”文字。
3. 页面下方有一个“Restart”按钮。
4. 点击“Restart”按钮后，结束页面消失，游戏重置到初始状态（包括开始页面）。
5. 重置后小蛇长度、位置、水果等全部恢复初始值。

**边界情况**：
- 结束页面显示期间，背景游戏画面应被遮盖（例如半透明遮罩）。
- 点击“Restart”后，游戏应无残留状态。

---

## 10. 非功能性需求

**标题**：确保游戏性能与用户体验

**作为** 一名玩家，
**我想要** 游戏运行流畅、响应迅速、无明显的卡顿或延迟，
**以便** 我能沉浸其中并获得愉快的游戏体验。

**验收标准**：
1. 游戏帧率不低于60 FPS（在标准硬件上）。
2. 键盘输入响应时间低于100毫秒。
3. 游戏窗口在失去焦点时暂停，重新获得焦点时继续。
4. 游戏资源（图像、声音）加载时间不超过2秒。
5. 游戏在不同分辨率、DPI设置下视觉元素保持比例。

**边界情况**：
- 长时间运行后内存使用量稳定，无内存泄漏。
- 游戏窗口最小化/还原后状态恢复正确。
 