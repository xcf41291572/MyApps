## 任务主题：游戏逻辑

### 任务：实现碰撞检测与增长逻辑

**目标：** 检测小蛇头部与水果的碰撞，碰撞后水果消失，小蛇长度增加一节。

**核心执行要点：**
- 每帧检测小蛇头部矩形与水果矩形是否重叠（矩形碰撞检测）。
- 若碰撞发生，立即将水果从屏幕上移除，并从水果列表中删除。
- 在小蛇尾部增加一节（颜色、尺寸与现有节相同），总长度+1。
- 小蛇移动速度保持不变（仍为20像素/秒）。

**非核心执行要点：**
- 支持碰撞事件回调，便于后续扩展（如得分增加、音效播放）。
- 处理两帧之间的碰撞检测（使用连续检测或更精确的边界判断）。

**验收标准：**
- 头部与水果重叠时，水果立即消失。
- 小蛇长度增加一节，新增节位置正确（紧随尾部）。
- 碰撞后游戏无视觉闪烁或延迟。
- 长度增加后移动速度不变。

**依赖：** 小蛇实体、水果实体。

---

### 任务：实现游戏结束检测

**目标：** 检测小蛇头部碰撞游戏边界或自身身体，触发游戏结束。

**核心执行要点：**
- 边界检测：判断头部坐标是否超出游戏区域（X<0, X>=800, Y<0, Y>=800）。
- 自碰检测：判断头部矩形是否与身体任何一节（除头部外）重叠。
- 任一条件满足时，立即触发游戏结束状态（停止小蛇移动、忽略所有输入）。

**非核心执行要点：**
- 提供游戏结束原因（撞墙/撞自身）用于日志或未来扩展。
- 确保检测精度（使用20×20像素的精确边界）。

**验收标准：**
- 小蛇头部触及四边任意一边时，游戏立即结束。
- 小蛇头部与自身身体重叠时，游戏立即结束。
- 游戏结束后小蛇停止移动，键盘输入无效。

**依赖：** 小蛇实体。

---